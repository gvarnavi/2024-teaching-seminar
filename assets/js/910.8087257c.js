"use strict";(self.webpackChunk_2024teaching_seminar=self.webpackChunk_2024teaching_seminar||[]).push([[910],{90910:(e,t,n)=>{function a(e){return e`<div style="color: grey; font: 13px/25.5px var(--sans-serif); text-transform: uppercase;"><h1 style="display: none;">Color legend</h1><a href="https://d3js.org/">D3</a> › <a href="/@d3/gallery">Gallery</a></div>

# Color legend

A simple legend for a [color scale](/@d3/color-schemes). Supports [continuous](/@d3/continuous-scales), [sequential](/@d3/sequential-scales), [diverging](/@d3/diverging-scales), [quantize, quantile, threshold](/@d3/quantile-quantize-and-threshold-scales) and [ordinal](/@d3/d3-scaleordinal) scales. To use:

~~~js
import {Legend, Swatches} from "@d3/color-legend"
~~~

Then call the legend function as shown below. (For ordinal scales, also consider the swatches function.)`}function i(e,t){return e(t.scaleSequential([0,100],t.interpolateViridis),{title:"Temperature (\xb0F)"})}function r(e,t){return e(t.scaleSequentialSqrt([0,1],t.interpolateTurbo),{title:"Speed (kts)"})}function o(e,t){return e(t.scaleDiverging([-.1,0,.1],t.interpolatePiYG),{title:"Daily change",tickFormat:"+%"})}function l(e,t){return e(t.scaleDivergingSqrt([-.1,0,.1],t.interpolateRdBu),{title:"Daily change",tickFormat:"+%"})}function s(e,t){return e(t.scaleSequentialLog([1,100],t.interpolateBlues),{title:"Energy (joules)",ticks:10})}function c(e,t){return e(t.scaleSequentialQuantile(t.range(100).map((()=>Math.random()**2)),t.interpolateBlues),{title:"Quantile",tickFormat:".2f"})}function u(e,t){return e(t.scaleSqrt([-100,0,100],["blue","white","red"]),{title:"Temperature (\xb0C)"})}function d(e,t){return e(t.scaleQuantize([1,10],t.schemePurples[9]),{title:"Unemployment rate (%)"})}function f(e,t){return e(t.scaleQuantile(t.range(1e3).map(t.randomNormal(100,20)),t.schemeSpectral[9]),{title:"Height (cm)",tickFormat:".0f"})}function h(e,t){return e(t.scaleThreshold([2.5,3.1,3.5,3.9,6,7,8,9.5],t.schemeRdBu[9]),{title:"Unemployment rate (%)",tickSize:0})}function m(e,t){return e(t.scaleOrdinal(["<10","10-19","20-29","30-39","40-49","50-59","60-69","70-79","\u226580"],t.schemeSpectral[10]),{title:"Age (years)",tickSize:0})}function p(e){return e`But wait, there’s more!

How about swatches for ordinal color scales? Both variable-width swatches and [column layout](https://developer.mozilla.org/en-US/docs/Web/CSS/columns) are supported.`}function g(e,t){return e(t.scaleOrdinal(["blueberries","oranges","apples"],t.schemeCategory10))}function b(e,t){return e(t.scaleOrdinal(["Wholesale and Retail Trade","Manufacturing","Leisure and hospitality","Business services","Construction","Education and Health","Government","Finance","Self-employed","Other"],t.schemeTableau10),{columns:"180px"})}function v(e){return e`---

## Implementation`}function _(e){return function(t,{title:n,tickSize:a=6,width:i=320,height:r=44+a,marginTop:o=18,marginRight:l=0,marginBottom:s=16+a,marginLeft:c=0,ticks:u=i/64,tickFormat:d,tickValues:f}={}){function h(e,t=256){const n=document.createElement("canvas");n.width=t,n.height=1;const a=n.getContext("2d");for(let i=0;i<t;++i)a.fillStyle=e(i/(t-1)),a.fillRect(i,0,1,1);return n}const m=e.create("svg").attr("width",i).attr("height",r).attr("viewBox",[0,0,i,r]).style("overflow","visible").style("display","block");let p,g=e=>e.selectAll(".tick line").attr("y1",o+s-r);if(t.interpolate){const n=Math.min(t.domain().length,t.range().length);p=t.copy().rangeRound(e.quantize(e.interpolate(c,i-l),n)),m.append("image").attr("x",c).attr("y",o).attr("width",i-c-l).attr("height",r-o-s).attr("preserveAspectRatio","none").attr("xlink:href",h(t.copy().domain(e.quantize(e.interpolate(0,1),n))).toDataURL())}else if(t.interpolator){if(p=Object.assign(t.copy().interpolator(e.interpolateRound(c,i-l)),{range:()=>[c,i-l]}),m.append("image").attr("x",c).attr("y",o).attr("width",i-c-l).attr("height",r-o-s).attr("preserveAspectRatio","none").attr("xlink:href",h(t.interpolator()).toDataURL()),!p.ticks){if(void 0===f){const n=Math.round(u+1);f=e.range(n).map((a=>e.quantile(t.domain(),a/(n-1))))}"function"!=typeof d&&(d=e.format(void 0===d?",f":d))}}else if(t.invertExtent){const n=t.thresholds?t.thresholds():t.quantiles?t.quantiles():t.domain(),a=void 0===d?e=>e:"string"==typeof d?e.format(d):d;p=e.scaleLinear().domain([-1,t.range().length-1]).rangeRound([c,i-l]),m.append("g").selectAll("rect").data(t.range()).join("rect").attr("x",((e,t)=>p(t-1))).attr("y",o).attr("width",((e,t)=>p(t)-p(t-1))).attr("height",r-o-s).attr("fill",(e=>e)),f=e.range(n.length),d=e=>a(n[e],e)}else p=e.scaleBand().domain(t.domain()).rangeRound([c,i-l]),m.append("g").selectAll("rect").data(t.domain()).join("rect").attr("x",p).attr("y",o).attr("width",Math.max(0,p.bandwidth()-1)).attr("height",r-o-s).attr("fill",t),g=()=>{};return m.append("g").attr("transform",`translate(0,${r-s})`).call(e.axisBottom(p).ticks(u,"string"==typeof d?d:void 0).tickFormat("function"==typeof d?d:void 0).tickSize(a).tickValues(f)).call(g).call((e=>e.select(".domain").remove())).call((e=>e.append("text").attr("x",c).attr("y",o+s-r-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(n))),m.node()}}function y(e){return function({color:t,...n}){return e(t,n)}}function w(e,t){return function(n,{columns:a=null,format:i,unknown:r,swatchSize:o=15,swatchWidth:l=o,swatchHeight:s=o,marginLeft:c=0}={}){const u=`-swatches-${Math.random().toString(16).slice(2)}`,d=null==r?void 0:n.unknown(),f=null==d||d===e.scaleImplicit?[]:[d],h=n.domain().concat(f);return void 0===i&&(i=e=>e===d?r:e),null!==a?t.html`<div style="display: flex; align-items: center; margin-left: ${+c}px; min-height: 33px; font: 10px sans-serif;">
  <style>

.${u}-item {
  break-inside: avoid;
  display: flex;
  align-items: center;
  padding-bottom: 1px;
}

.${u}-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: calc(100% - ${+l}px - 0.5em);
}

.${u}-swatch {
  width: ${+l}px;
  height: ${+s}px;
  margin: 0 0.5em 0 0;
}

  </style>
  <div style=${{width:"100%",columns:a}}>${h.map((e=>{const a=`${i(e)}`;return t.html`<div class=${u}-item>
      <div class=${u}-swatch style=${{background:n(e)}}></div>
      <div class=${u}-label title=${a}>${a}</div>
    </div>`}))}
  </div>
</div>`:t.html`<div style="display: flex; align-items: center; min-height: 33px; margin-left: ${+c}px; font: 10px sans-serif;">
  <style>

.${u} {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}

.${u}::before {
  content: "";
  width: ${+l}px;
  height: ${+s}px;
  margin-right: 0.5em;
  background: var(--color);
}

  </style>
  <div>${h.map((e=>t.html`<span class="${u}" style="--color: ${n(e)}">${i(e)}</span>`))}</div>`}}function x(e){return function({color:t,...n}){return e(t,n)}}function k(e,t){const n=e.module();return n.variable(t()).define(["md"],a),n.variable(t()).define(["Legend","d3"],i),n.variable(t()).define(["Legend","d3"],r),n.variable(t()).define(["Legend","d3"],o),n.variable(t()).define(["Legend","d3"],l),n.variable(t()).define(["Legend","d3"],s),n.variable(t()).define(["Legend","d3"],c),n.variable(t()).define(["Legend","d3"],u),n.variable(t()).define(["Legend","d3"],d),n.variable(t()).define(["Legend","d3"],f),n.variable(t()).define(["Legend","d3"],h),n.variable(t()).define(["Legend","d3"],m),n.variable(t()).define(["md"],p),n.variable(t()).define(["Swatches","d3"],g),n.variable(t()).define(["Swatches","d3"],b),n.variable(t()).define(["md"],v),n.variable(t("Legend")).define("Legend",["d3"],_),n.variable(t("legend")).define("legend",["Legend"],y),n.variable(t("Swatches")).define("Swatches",["d3","htl"],w),n.variable(t("swatches")).define("swatches",["Swatches"],x),n}function D(e){return e`# Scrubber

This reusable input is intended to drive animations while providing the reader interactive control on demand: the animation pauses when the user interacts with the slider, but can be resumed by clicking the play button. For examples, see [Bar Chart Race](/@mbostock/bar-chart-race-with-scrubber), [The Wealth & Health of Nations](/@mbostock/the-wealth-health-of-nations), [Solar Path](/@mbostock/solar-path), or [Animated Treemap](/@d3/animated-treemap).`}function S(e){return e`To use in your notebook:

~~~js
import {Scrubber} from "@mbostock/scrubber"
~~~
`}function M(e,t){return e(t)}function L(){return Array.from({length:256},((e,t)=>t))}function q(e,t){return e`The current value of *i* is ${t}.`}function j(e){return e`Given an array of *values* representing the discrete frames of the animation, such as an array of numbers or dates, Scrubber returns a [view-compatible input](/@observablehq/introduction-to-views). (It uses the [disposal promise](/@mbostock/disposal) to stop the animation automatically on invalidation.)`}function P(e){return e`## Options

Scrubber has several options which you can pass as the second argument.`}function $(e){return e`The *autoplay* option, which defaults to true, specifies whether the animation plays automatically. Set it to false to require the reader to click on the play button.`}function A(e,t){return e(t,{autoplay:!1})}function I(e){return e`The *loop* option, which defaults to true, specifies whether the animation should automatically restart from the beginning after the end is reached. Set it to false to require the reader to click the play button to restart the animation after it ends.`}function T(e,t){return e(t,{loop:!1})}function z(e){return e`The *alternate* option, which defaults to false, specifies whether the animation should reverse direction when it reaches the end, rather than repeat from the start.`}function J(e,t){return e(t,{loop:!1,alternate:!0})}function B(e){return e`The *delay* option, which defaults to null, specifies how long to wait between frames in milliseconds. A null value means to use [requestAnimationFrame](https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame), which typically means sixty times per second (about 17ms). Non-null delays use [setInterval](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval).`}function O(e){return e(["red","green","blue"],{delay:1e3})}function W(e){return e`The *loopDelay* option, which defaults to 0, specifies how long to wait before looping in milliseconds. This can be paired with the *initial* option to show the ending value before the animation starts anew from the beginning.`}function G(e,t){return e(t,{initial:t.length-1,loopDelay:1e3})}function N(e){return e`The *format* option, which defaults to the identity function, specifies how to display the currently-selected value. The *format* function is passed the current value, the current (zero-based) index, and the values array.`}function C(){return Array.from({length:365},((e,t)=>{const n=new Date(2019,0,1);return n.setDate(t+1),n}))}function E(e,t){return e(t,{autoplay:!1,format:e=>e.toLocaleString("en",{month:"long",day:"numeric"})})}function F(e){return e`If you have suggestions for other options you’d like to see, please let me know!`}function H(e){return e`---

## Implementation`}function R(e,t){return function(n,{format:a=(e=>e),initial:i=0,direction:r=1,delay:o=null,autoplay:l=!0,loop:s=!0,loopDelay:c=null,alternate:u=!1}={}){n=Array.from(n);const d=e`<form style="font: 12px var(--sans-serif); font-variant-numeric: tabular-nums; display: flex; height: 33px; align-items: center;">
  <button name=b type=button style="margin-right: 0.4em; width: 5em;"></button>
  <label style="display: flex; align-items: center;">
    <input name=i type=range min=0 max=${n.length-1} value=${i} step=1 style="width: 180px;">
    <output name=o style="margin-left: 0.4em;"></output>
  </label>
</form>`;let f=null,h=null,m=null;function p(){d.b.textContent="Pause",null===o?f=requestAnimationFrame(v):m=setInterval(v,o)}function g(){d.b.textContent="Play",null!==f&&(cancelAnimationFrame(f),f=null),null!==h&&(clearTimeout(h),h=null),null!==m&&(clearInterval(m),m=null)}function b(){return null!==f||null!==h||null!==m}function v(){if(d.i.valueAsNumber===(r>0?n.length-1:r<0?0:NaN)){if(!s)return g();if(u&&(r=-r),null!==c)return null!==f&&(cancelAnimationFrame(f),f=null),null!==m&&(clearInterval(m),m=null),void(h=setTimeout((()=>(_(),p())),c))}null===o&&(f=requestAnimationFrame(v)),_()}function _(){d.i.valueAsNumber=(d.i.valueAsNumber+r+n.length)%n.length,d.i.dispatchEvent(new CustomEvent("input",{bubbles:!0}))}return d.i.oninput=e=>{e&&e.isTrusted&&b()&&g(),d.value=n[d.i.valueAsNumber],d.o.value=a(d.value,d.i.valueAsNumber,n)},d.b.onclick=()=>{if(b())return g();r=u&&d.i.valueAsNumber===n.length-1?-1:1,d.i.valueAsNumber=(d.i.valueAsNumber+r)%n.length,d.i.dispatchEvent(new CustomEvent("input",{bubbles:!0})),p()},d.i.oninput(),l?p():g(),t.disposal(d).then(g),d}}function U(e,t){const n=e.module();return n.variable(t()).define(["md"],D),n.variable(t()).define(["md"],S),n.variable(t("viewof i")).define("viewof i",["Scrubber","numbers"],M),n.variable(t("i")).define("i",["Generators","viewof i"],((e,t)=>e.input(t))),n.variable(t("numbers")).define("numbers",L),n.variable(t()).define(["md","i"],q),n.variable(t()).define(["md"],j),n.variable(t()).define(["md"],P),n.variable(t("autoplay")).define("autoplay",["md"],$),n.variable(t()).define(["Scrubber","numbers"],A),n.variable(t("loop")).define("loop",["md"],I),n.variable(t()).define(["Scrubber","numbers"],T),n.variable(t()).define(["md"],z),n.variable(t()).define(["Scrubber","numbers"],J),n.variable(t("delay")).define("delay",["md"],B),n.variable(t()).define(["Scrubber"],O),n.variable(t("loopDelay")).define("loopDelay",["md"],W),n.variable(t()).define(["Scrubber","numbers"],G),n.variable(t("format")).define("format",["md"],N),n.variable(t("dates")).define("dates",C),n.variable(t("viewof date")).define("viewof date",["Scrubber","dates"],E),n.variable(t("date")).define("date",["Generators","viewof date"],((e,t)=>e.input(t))),n.variable(t()).define(["md"],F),n.variable(t()).define(["md"],H),n.variable(t("Scrubber")).define("Scrubber",["html","Inputs"],R),n}function V(e){return e`# Teaching Materials Science Concepts using the (d3-)force
#### Georgios Varnavides*  
---
*Content initially created in collaboration with Craig Carter and Amina Matt using the Wolfram Language
`}function Q(e){return e`
## Introduction
>If, in some cataclysm, all of scientific knowledge were to be destroyed, and only one sentence passed on to the next generations of creatures, what statement would contain the most information in the fewest words? I believe it is the atomic hypothesis (or the atomic fact, or whatever you wish to call it) that all things are made of atoms - little particles that move around in perpetual motion, attracting each other when they are a little distance apart, but repelling upon being squeezed into one another. In that one sentence, you will see, there is an enormous amount of information about the world, if just a little imagination and thinking are applied.

Richard Feynman, The Feynman Lectures on Physics, Chapter 1, Volume I (Feynman, Leighton, and Sands)
`}function X(e){return e`
## Reference

- [Lennard-Jones Potential](#lennardJonesPotentialDoc)
- [1D Lattice Vibrations](#latticeVibrationsDoc)
- [Surface Energy](#surfaceEnergyDoc)
- [Compression Waves And Symmetry Breaking](#compressionWavesDoc)
- [Dislocations](#dislocationsDoc)
- [Beyond Lennard-Jones Potentials](#beyondLJDoc)
- [Playground](#playgroundDoc)

`}function Y(e){return e`## [#](#lennardJonesPotentialDoc) Lennard-Jones Potential [<>](https://observablehq.com/@gvarnavi/teaching-materials-science-concepts-using-the-d3-force#lennardJonesPotentialDoc)

The [Lennard-Jones potential](https://en.wikipedia.org/wiki/Lennard-Jones_potential) is a model for a particle's potential energy when it is separated from another particle. 

The model is simple - particles attract each other when they are far apart and repel when they are very near. Nevertheless, the information that we will compute and visualize is enormous - especially when there are many interacting particles.

All of the physics and its consequences derive from the shape of the potential:
`}function K(e,t){return e.plot({x:{domain:[.75,1.5],label:"Normalized Interatomic Distance, \u03c1 \u2192"},y:{domain:[-2.75,2.75],grid:!0,label:null},marks:[e.line(t,{x:"rho",y:"energy",stroke:"#4e79a7"}),e.line(t,{x:"rho",y:"force",stroke:"#e15759"}),e.ruleX([1],{stroke:"black"}),e.text(t.slice(t.length-1),{x:"rho",y:"energy",text:["Energy"],fill:"#4e79a7",dy:"-1em"}),e.text(t.slice(t.length-1),{x:"rho",y:"force",text:["Force"],fill:"#e15759",dy:"-1em"})]})}function Z(e){return e`When the distance is small, the potential **energy** decreases with increasing distance. The **force** is positive and repulsive because force is minus the gradient of potential energy.

When the distance is large, the potential **energy** slope is positive and so the **force** is negative: the particles attract.  

We could construct manyfunctions that behave like this; the Lennard-Jones potential is a simple choice. 
`}function ee(e,t){return e`
### Non-Dimensional Form
Mathematically, the Lennard-Jones potential is given by a linear combination of two terms:
- An attractive term that goes to zero as ${t`-\frac{1}{r^6}`} as ${t`r \rightarrow \infty`}
- A repulsive term that goes to infinity as ${t`\frac{1}{r^{12}}`} as ${t`r \rightarrow 0`}
`}function te(e){return e.block`U_{ljp} = \frac{a}{r^{12}} + \frac{b}{r^6}`}function ne(e,t){return e`
with ${t`a`} and ${t`b`} being material-properties we could extract using experimental observations.

While this form is useful in investigating material-specific behaviour, we wish to understand the dynamics of materials with this **family** of interatomic potentials. To do this, we can instead derive a general form by non-dimensionalizing our potential by:
1. introducing a non-dimensional length ${t`\rho = \frac{r}{r_{min}}`}
2. dividing the potential by an energy minimum ${t`e_{min}`}
`}function ae(e){return e.block`\tilde{U}_{ljp} = \frac{1}{\rho^{12}}-\frac{2}{\rho^6}`}function ie(e){return e`
### Harmonic Approximation
The plotting range above is slightly misleading. Most of the time, atoms like to be close the energy minimum and fluctuate around that position.

Therefore, before we tackle the full problem - it's instructive to look for an approximate solution near the energy minimum. We can do so by expanding near the bottom of the energy well to second order and obtain the following parabolic (or harmonic) approximation:
`}function re(e){return e.block`\tilde{U}_{\textrm{harmonic}} = -1 + 36\left(\rho -1\right)^2 + \mathcal{O}\left(\rho-1\right)^3`}function oe(e,t){return e.plot({x:{domain:[.75,1.5],label:"Normalized Interatomic Distance, \u03c1 \u2192"},y:{domain:[-2.75,2.75],grid:!0,label:null},marks:[e.line(t,{x:"rho",y:"energy",stroke:"#4e79a7"}),e.line(t,{x:"rho",y:"harmonic",stroke:"#e15759"}),e.ruleX([1],{stroke:"black"}),e.text(t.slice(t.length-1),{x:"rho",y:"energy",text:["Energy"],fill:"#4e79a7",dy:"-1em"}),e.text(t.slice(t.length-175,t.length-174),{x:"rho",y:"harmonic",text:["Harmonic"],fill:"#e15759",dy:"-5em"})]})}function le(e){return e`---

## [#](#latticeVibrationsDoc) 1D Lattice Vibrations [<>](https://observablehq.com/@gvarnavi/teaching-materials-science-concepts-using-the-d3-force#latticeVibrationsDoc)

Let's start by looking at a (finite) one-dimensional lattice with fixed ends. We will consider two treatments:
1. Small amplitude vibrations
  - atoms interact only with their nearest neighbors
  - as if they're masses attached with springs (Harmonic approximation)
2. Larger amplitude vibrations (atoms interact via the Lennard-Jones potential)
`}function se(e,t,n){return e`
### 1. Harmonic Approximation
We make a one-dimensional lattice with ${t+1} atoms and start the simulation by displacing the atoms using an initial sine-wave pattern.

__Note:__ We're exaggerating the displacements by a factor of ${Math.round(1/n)} for visual clarity.`}function ce(e){return e.button("(re)Start Simulation")}function ue(e,t,n,a,i,r,o,l,s,c,u){const d=e.select(t.svg(n.width,n.width/8)),f=a.map((e=>Object.create(e))),h=i.map((e=>Object.create(e))),m=r;let p=0;d.attr("viewBox",[-2.5,-2.5,o+5,5]);const g=e.forceSimulation(f).force("link",e.forceLink(h).distance(1).iterations(0)).alphaDecay(0).velocityDecay(0).dt(.5),[b,v]=l(d,f,null,!1,!1);return b.attr("opacity",(e=>null==e.fx?.5:1)).attr("fill",(e=>null==e.fx?"gray":"black")),g.on("tick",(()=>{(p++>750||0==m)&&g.stop(),"horizontal"==s?b.attr("cx",(e=>e.x+(e.x-e.index)/c)).attr("cy",(e=>e.y)):b.attr("cx",(e=>e.index)).attr("cy",(e=>(e.x-e.index)/c))})),u.then((()=>g.stop())),d.node()}function de(e){return e`
We chose an initial sine-wave displacement in anticipation of the behaviour being periodic in space (and time). In particular, we moved each atom from its equilibrium position by the function:`}function fe(e,t,n){return e.plot({width:t.width,height:t.width/8,marginRight:40,x:{grid:!0,label:"Normalized position along chain \u2192"},y:{grid:!0,label:"\u2191 Normalized displacement"},marks:[e.line(n,{x:"x",y:"y"})]})}function he(e){return e`
What if we started with fewer/more 'nodes' along our initial displacement?
Change the value fo the sub-harmonic mode below to see how this influences the vibrations!
`}function me(e){return e.range([1,6],{step:1,label:"Sub-harmonic",value:3})}function pe(e){return e`
The visualization using horizontal displacements is hard to see. Let's instead plot the displacements of each atom away from its equilibrium position vertically. 

__Note:__ The physics is still in the horizontal direction!`}function ge(e){return e.radio(["horizontal","vertical"],{label:"Oscillation direction",value:"horizontal"})}function be(e){return e`
### Dispersion Relations
We were running the above simulation for a fixed time, but notice how the behaviour is periodic in time. Let's write a helper function to extract that period and stop the simulation.

The function __compute_single_period()__ calculates one period of oscillation given a particular sub-harmonic mode number:
`}function ve(e,t,n){return function(a,i,r,o,l){if(0==i||Math.abs(i)==a)return 1/0;Math.abs(i)==a/2&&(i+=1),null==r&&(r=e),null==o&&(o=.0075),null==l&&(l=5e3);let s,c,u=[r],d=0;[s,c]=t(a,i,r);const f=s.map((e=>Object.create(e))),h=c.map((e=>Object.create(e))),m=n.forceSimulation(f).force("link",n.forceLink(h).distance(1).iterations(0)).alphaDecay(0).velocityDecay(0).dt(o);do{d++,m.tick();const e=f.map((e=>e.x-e.index));u.push(e.reduce(((e,t)=>e+t*t)))}while(d<l&&u[d]-u[d-1]<0);return m.stop(),(d-1)*o}}function _e(e,t,n,a){return e`
For example it takes ${t(n,a)} (dimensionless) time-units to do a single periodic oscillation for the ${a}th sub-harmonic mode for ${n} atoms!

\`\`\`javascript
compute_single_period(num_of_atoms,sub_harmonic)
\`\`\`
${t(n,a)}
`}function ye(e,t,n){return e`
Let's do this for all sub-harmonic modes in the range [${-t/2-5},${t+5}]   
and plot the frequency ${n`\left(\frac{2\pi}{\mathrm{period}}\right)`} against the wave-vector ${n`\left( \frac{2 \pi \times \mathrm{sub-harmonic\;mode}}{\mathrm{number\;of\;atoms}}\right)`}  
for each sub-harmonic mode:
`}function we(e,t,n,a){let i=e;return t.markCircle({size:50}).data(n).params(i).encode(t.x().fieldQ("wavevector"),t.y().fieldQ("frequency"),t.color().if(i,t.value("steelblue")).value("lightgrey")).width(a.width/2).render()}function xe(e){return e`
What we just plotted is called a dispersion relation. 

Let's get a sense of what it means for our lattice vibrations. Try hovering over one of the points in the dispersion plot and notice how the wavelength (inversely related to the wavevector) and frequency (inversely related to the period) change below!
`}function ke(e,t,n,a,i,r,o,l,s,c,u){const d=e.select(t.svg(n.width,n.width/8)),[f,h]=a(i,r,o);let m=0;d.attr("viewBox",[-2.5,-2.5,i+5,5]);const p=e.forceSimulation(f).force("link",e.forceLink(h).distance(1).iterations(0)).alphaDecay(0).velocityDecay(0).dt(.25),[g,b]=l(d,f,null,!1,!1);return g.attr("opacity",(e=>null==e.fx?.5:1)).attr("fill",(e=>null==e.fx?"gray":"black")),p.on("tick",(()=>{m++>750&&p.stop(),"horizontal"==s?g.attr("cx",(e=>e.x+(e.x-e.index)/c)).attr("cy",(e=>e.y)):g.attr("cx",(e=>e.index)).attr("cy",(e=>(e.x-e.index)/c))})),u.then((()=>p.stop())),d.node()}function De(e,t){return e`
Sub-harmonic mode:${t}
`}function Se(e,t){return e`
The dispersion behaviour is periodic in the domain ${t`\left(-\frac{\pi}{a},\frac{\pi}{a}\right)`}, where _a_ is the lattice spacing (${t`a=1`} in our case).

This periodic domain is called the __first Brillouin zone__ and it turns out to be a very useful property in materials science.
`}function Me(e){return e`
### 2. Lennard Jones Vibrations
Let's run the same 1D-lattice simulation using the Lennard-Jones potential instead.
This means our particles interact according to second, third, etc. nearest neighbor interactions - making the behaviour nonlinear!
`}function Le(e){return e.button("(re)Start Simulation")}function qe(e,t,n,a,i,r,o,l,s,c,u,d){const f=e.select(t.svg(n.width,n.height/3)),h=a,[m,p]=i(r,o,l);let g=0;f.attr("viewBox",[-2.5,-2.5,r+5,5]);const b=e.forceSimulation(m).force("lennard-jones-BH",e.forceLennardJonesPotential().theta(.25)).alphaDecay(0).velocityDecay(0).dt(.025),[v,_]=s(f,m,null,!1,!1,c);return b.on("tick",(()=>{(g++>750||0==h)&&b.stop(),"horizontal"==u?v.attr("cx",(e=>e.x+(e.x-e.index)/l)).attr("cy",(e=>e.y)).attr("fill",(e=>c(e.energy))):v.attr("cx",(e=>e.index)).attr("cy",(e=>(e.x-e.index)/l)).attr("fill",(e=>c(e.energy)))})),d.then((()=>b.stop())),f.node()}function je(e){return e.range([.0125,.05],{step:.0125,label:"Oscillation Magnitude",value:.0125})}function Pe(e){return e`
The larger the initial oscillation magnitude - the further away from the harmonic approximation we sample, and thus the more nonlinear behaviour. Try running the simulation above using larger and larger oscillation magnitudes.  

__Note:__ The actual oscillation is normalized to be the same in all cases (to allow easier comparison), but notice how the vibrations quickly become nonlinear for larger values!`}function $e(e,t,n){return e({color:t,title:"Lennard-Jones energy 1D",width:n.width/2})}function Ae(e){return e`
__Note:__ Finally, notice we've colored each atom according to their Lennard-Jones potential energy.
The colors fluctuate as atoms move from high (red) to low (blue) energies, but our fixed edge atoms appear to be mostly in a state of higher energy.

This because they only have one nearest neighbor (as opposed to two like the 'bulk' atoms), and give us a hint as to the physical origin of surface tension!
`}function Ie(e){return e`---

## [#](#surfaceEnergyDoc) Surface Energy [<>](https://observablehq.com/@gvarnavi/teaching-materials-science-concepts-using-the-d3-force#surfaceEnergyDoc)

Let's investigate this surface-energy effect by looking at larger interacting systems.
For example, some atoms on a square lattice.
`}function Te(e,t,n,a,i,r,o){const l=e.select(t.svg(n.width,n.height)),s=a.map((e=>Object.create(e)));l.attr("viewBox",[-10,-10,20,20]),e.forceSimulation(s).force("lennard-jones-BH",e.forceLennardJonesPotential().theta(0)).alphaDecay(0).velocityDecay(0).dt(.0125).tick().stop();const[c,u]=i(l,s,null,!1,!1,r);return o.value=e.sum(s.map((e=>e.energy))),l.node()}function ze(e,t,n){return e({color:t,title:"Lennard-Jones energy 2D",width:n.width/2})}function Je(e){return e`
We've again colored each atom by their total energy, with red being 'higher' energy and dark blue being 'lower' energy. It's evident that the atoms on the surface have a higher energy! 

We can think about this by counting 'satisfied' and 'dangling' bonds. The atoms inside the 'bulk' of the particle all have 4 nearest neighbors (blue), the atoms on the edges of the particle have 3 nearest neighbors (green), while the atoms in the corners of the particle only have two nearest neighbors (orange).
`}function Be(e){return e`
### Surface energy anisotropy
We started with a square-particle above, and found that energy is related to its geometry and nearest-neighbour configurations.  

What can this tell us about the directional anisotropy of the particle's facets? E.g. are 90 degree facets higher or lower energy than 45 degree facets? Let's find out!
`}function Oe(e,t,n,a,i,r,o,l){const s=e.select(t.svg(n.width,n.height)),c=a/180*Math.PI,[u,d]=i(r,c);s.attr("viewBox",[-10,-10,20,20]),e.forceSimulation(u).force("lennard-jones-BH",e.forceLennardJonesPotential().theta(0)).alphaDecay(0).velocityDecay(0).dt(0).tick().stop(),e.forceSimulation(d).force("lennard-jones-BH",e.forceLennardJonesPotential().theta(0)).alphaDecay(0).velocityDecay(0).dt(0).tick().stop(),u.forEach((e=>{e.x-=Math.sin(c),e.y+=Math.cos(c)})),d.forEach((e=>{e.x+=Math.sin(c),e.y-=Math.cos(c)}));const[f,h]=o(s,[...u,...d],null,!1,!1,l);return s.append("line").style("stroke","black").style("stroke-width",.05).style("stroke-dasharray",.25).attr("x1",12.5*Math.cos(c)).attr("y1",12.5*Math.sin(c)).attr("x2",-12.5*Math.cos(c)).attr("y2",-12.5*Math.sin(c)),s.node()}function We(e){return e.range([-90,90],{label:"Slice angle",value:-30})}function Ge(e){return e`
Try moving the slice angle slider above, which splits our square particle down the middle. Can you guess which angles will lead to higher/lower energy facets?
`}function Ne(e){return e`
The surface energy is given by the additional energy the sliced particle has, as compared to the bulk energy of the particle before slicing:
`}function Ce(e){return e.block`\frac{E_{\mathrm{particle}} - N E_{\mathrm{bulk}}}{2 A}`}function Ee(e,t){return e`
where ${t`N`}, ${t`A`} are the number of particles and area of the cleaved surface respectively.  
We can write a function to compute the surface energy for a particular orientation:
`}function Fe(e,t,n,a){return(i,r)=>{const o=r/180*Math.PI;let l=16;l=Math.abs(r)<45?Math.sqrt(256+256*Math.abs(Math.tan(o))):Math.sqrt(256+256*Math.abs(1/Math.tan(o)));const[s,c]=e(t,o);return n.forceSimulation(s).force("lennard-jones-BH",n.forceLennardJonesPotential().theta(0)).alphaDecay(0).velocityDecay(0).dt(0).tick().stop(),n.forceSimulation(c).force("lennard-jones-BH",n.forceLennardJonesPotential().theta(0)).alphaDecay(0).velocityDecay(0).dt(0).tick().stop(),(n.sum([...s,...c].map((e=>e.energy)))-a)/2}}function He(e,t,n,a){return e`
For example cleaving along ${t}° leads to a (dimensionless) surface energy cost of ${n(a,t)}

\`\`\`javascript
compute_average_energy(square_lattice,theta_in_deg)
\`\`\`
${n(a,t)}
`}function Re(e){return e`
Let's do this for all angles in the range [-180°,180°] and plot the surface energy as a polar plot!
`}function Ue(e,t){return e.plot({x:{axis:null},y:{axis:null},marks:[e.ruleX([0],{stroke:"black"}),e.ruleY([0],{stroke:"black"}),e.dot(t,{x:"x",y:"y",fill:"steelblue",r:7.5})],width:400,height:400,marginLeft:10,marginTop:10,marginRight:10,marginBottom:10})}function Ve(e){return e`
Note that:
1. Our surface energy plot has (as expected) square symmetry
2. 90° facets are indeed the lowest energy surfaces
`}function Qe(e){return e`
### Lattice Instabilities
The square lattice we've constructed above however, cannot be stabilized purely by central forces (like the Lennard-Jones) and is mechanically unstable in 2D.

It turns out, any slight perturbation (here due to our surface-energy terms, but the same would also happen due to thermal fluctuations in large ('infinite') lattices), will lead to the atoms re-arranging in a 2D closed-packed arrangement!
`}function Xe(e){return e.button("(re)Start Simulation")}function Ye(e,t,n,a,i,r,o,l){const s=e.select(t.svg(n.width,n.height)),c=a.map((e=>Object.create(e))),u=i;let d=0;s.attr("viewBox",[-10,-10,20,20]);const f=e.forceSimulation(c).force("lennard-jones-BH",e.forceLennardJonesPotential().theta(.25).distanceMax(1.5)).alphaDecay(0).velocityDecay(0).dt(.0125),[h,m]=r(s,c,null,!1,!1,o);return f.on("tick",(()=>{(d++>250||0==u)&&f.stop(),h.attr("cx",(e=>e.x)).attr("cy",(e=>e.y)).attr("fill",(e=>o(e.energy)))})),l.then((()=>f.stop())),s.node()}function Ke(e,t,n){return e({color:t,title:"Lennard-Jones energy 2D",width:n.width/2})}function Ze(e){return e`
__Note:__ Most atoms (especially in the corners) have re-arranged themselves to have ~6 nearest neighbors!`}function et(e){return e`---

## [#](#compressionWavesDoc) Compression Waves and Symmetry Breaking [<>](https://observablehq.com/@gvarnavi/teaching-materials-science-concepts-using-the-d3-force#compressionWavesDoc)

We'll continue our exploration by looking at stable hexagonal close-packed lattices.
In particular, we'll focus on a rotating nanoparticle.
`}function tt(e){return e`### Compression Waves
Let's start our nanoparticle spinning at a slow* rate.
Try running the animation below, and notice the compression waves which form as the particle spins.

*Under normal conditions, most particles would not spin this fast - but we're exploring the physics here, and it helps to exaggerate.`}function nt(e){return e.button("(re)Start Simulation")}function at(e,t,n,a,i,r,o,l,s){const c=e.select(t.svg(n.width,n.height)),u=a.map((e=>Object.create(e))),d=i;c.attr("viewBox",[-12.5,-12.5,25,25]);const f=e.forceSimulation(u).force("lennard-jones-BH",e.forceLennardJonesPotential().theta(.125).distanceMax(1.75)).alphaDecay(0).velocityDecay(0).dt(.05);f.counter=0;const[h,m]=r(c,u,null,!1,!1,o);return h.call(l(f)),f.on("tick",(()=>{(f.counter++>500||0==d)&&f.stop(),h.attr("cx",(e=>e.x)).attr("cy",(e=>e.y)).attr("fill",(e=>o(e.energy)))})),s.then((()=>f.stop())),c.node()}function it(e,t,n){return e({color:t,title:"Lennard-Jones energy 2D",width:n.width/2})}function rt(e){return e.range([.225,.325],{step:.0125,label:"Nanoparticle Initial Velocity",value:.25})}function ot(e){return e`Let's crank up the initial rotation speed to see how the forces 'rip' the particle apart.

You might notice the end result no-longer has six-fold symmetry.`}function lt(e){return e`__Note:__ The simulation above is interactive!  
Try running the simulation again and dragging one of the atoms (ever so slightly, closed-packed particles experience high forces!)`}function st(e){return e`---

## [#](#dislocationsDoc) Dislocations [<>](https://observablehq.com/@gvarnavi/teaching-materials-science-concepts-using-the-d3-force#dislocationsDoc)

Let's push our simulation to the limit, by _literally_ pushing particles into one another - e.g. in an indentation experiment.
`}function ct(e){return e(175)}function ut(e,t,n,a,i,r,o){const l=e.select(t.svg(n.width,n.height)),s=a[i];l.attr("viewBox",[-15,-7.5,30,22.5]);const[c,u]=r(l,s,null,!1,!1,o);return l.node()}function dt(e,t,n){return e({color:t,title:"Lennard-Jones energy 2D",width:n.width/2})}function ft(e){return e`
__Note:__ Run the slider again slowly, and notice the lines of high energy starting to form near the indenter.
As particles get pushed out of their equilibrium positions, the indenter creates extra 'half-planes' of atoms which need to be accommodated in the lattice.

These are dislocations starting to form, and it's how materials deform plastically!
`}function ht(e){return e`---

## [#](#beyondLJDoc) Beyond Lennard-Jones Potentials [<>](https://observablehq.com/@gvarnavi/teaching-materials-science-concepts-using-the-d3-force#beyondLJDoc)

The Lennard-Jones potential is just a model to guide our exploration of simple physics. There is no (real) justification for its precise form.  

In fact, the choice of the function won't affect the results very much - any potential function with the repulsive/attractive shape above will produce similar consequences.

Let's test that!
`}function mt(e){return e`### Generalized Lennard-Jones Potential
Sometimes the Lennard-Jones Potential is called a 6-12 potential because of the exponents used.
This generalizes nicely to _nm_-potentials, where _n_ and _m_ refer to the exponents in the interatomic potential:
`}function pt(e){return e.block`\tilde{U}_{g-ljp}(\rho) = \frac{n \rho^{-m}-m \rho^{-n}}{m-n}`}function gt(e,t){return e.plot({x:{domain:[.75,1.5],label:"Normalized Interatomic Distance, \u03c1 \u2192"},y:{domain:[-2.75,2.75],grid:!0,label:null},marks:[e.line(t,{x:"rho",y:"lj_energy",stroke:"#4e79a7"}),e.line(t,{x:"rho",y:"generalized_energy",stroke:"#e15759"}),e.ruleX([1],{stroke:"black"}),e.text(t.slice(t.length-1),{x:"rho",y:"lj_energy",text:["LJ Energy"],fill:"#4e79a7",dy:"-1.5em"}),e.text(t.slice(t.length-50,t.length-49),{x:"rho",y:"generalized_energy",text:["Generalized Energy"],fill:"#e15759",dy:"-5em"})]})}function bt(e){return e.range([6,16],{value:14,step:1,label:"Repulsive Power"})}function vt(e){return e.range([3,8],{value:4,step:1,label:"Attractive Power"})}function _t(e){return e.button("(re)Start Simulation")}function yt(e,t,n,a,i,r,o,l,s,c,u){const d=e.select(t.svg(n.width,n.height)),f=a.map((e=>Object.create(e))),h=i;d.attr("viewBox",[-12.5,-12.5,25,25]);const m=e.forceSimulation(f).force("lennard-jones-BH",e.forceLennardJonesPotential().theta(.125).distanceMax(1.75).attractivePower(r).repulsivePower(o)).alphaDecay(0).velocityDecay(0).dt(.05);m.counter=0;const[p,g]=l(d,f,null,!1,!1,s);return p.call(c(m)),m.on("tick",(()=>{(m.counter++>250||0==h)&&m.stop(),p.attr("cx",(e=>e.x)).attr("cy",(e=>e.y)).attr("fill",(e=>s(e.energy)))})),u.then((()=>m.stop())),d.node()}function wt(e){return e`### Morse Potential
We're also not restricted to LJ-type potentials. The extended \`d3-force-md\` module we're using can also handle general central-body potentials given a general function and its (2D) gradient.  
E.g. we can look at the closely related Morse-potential:
`}function xt(e){return e.block`
\begin{aligned}
\tilde{U}_{Morse}(\rho) &= e^{-2 a (\rho -1)}-2 e^{a (1-\rho )} \\
\frac{\tilde{U}_{Morse}'(\rho)}{\rho} &= \frac{2 a e^{a (1-\rho )}-2 a e^{-2 a (\rho -1)}}{\rho }
\end{aligned}`}function kt(e,t){return e.plot({x:{domain:[.75,1.5],label:"Normalized Interatomic Distance, \u03c1 \u2192"},y:{domain:[-2.75,2.75],grid:!0,label:null},marks:[e.line(t,{x:"rho",y:"lj_energy",stroke:"#4e79a7"}),e.line(t,{x:"rho",y:"morse_energy",stroke:"#e15759"}),e.ruleX([1],{stroke:"black"}),e.text(t.slice(t.length-1),{x:"rho",y:"lj_energy",text:["LJ Energy"],fill:"#4e79a7",dy:"-1.5em"}),e.text(t.slice(t.length-50,t.length-49),{x:"rho",y:"morse_energy",text:["Morse Energy"],fill:"#e15759",dy:"-5em"})]})}function Dt(){return e=>Math.exp(20-20*e)-2*Math.exp(10-10*e)}function St(){return e=>20*Math.exp(10-20*e)*(Math.exp(10*e)-Math.exp(10))/e}function Mt(e){return e.button("(re)Start Simulation")}function Lt(e,t,n,a,i,r,o,l,s,c,u){const d=e.select(t.svg(n.width,n.height)),f=a.map((e=>Object.create(e))),h=i;d.attr("viewBox",[-12.5,-12.5,25,25]);const m=e.forceSimulation(f).force("morse-potential",e.forceCentralPotential().theta(.125).distanceMax(1.75).potentialFunction(r).gradientFunction(o)).alphaDecay(0).velocityDecay(0).dt(.05);m.counter=0;const[p,g]=l(d,f,null,!1,!1,s);return p.call(c(m)),m.on("tick",(()=>{(m.counter++>250||0==h)&&m.stop(),p.attr("cx",(e=>e.x)).attr("cy",(e=>e.y)).attr("fill",(e=>s(e.energy)))})),u.then((()=>m.stop())),d.node()}function qt(e){return e`---

## [#](#playgroundDoc) Playground [<>](https://observablehq.com/@gvarnavi/teaching-materials-science-concepts-using-the-d3-force#playgroundDoc)

Your turn!  

Use the canvas to below to draw a particle shape by clicking to add vertices.
Once you're satisfied with your shape, scroll down to play around with your particle by dragging (remember, ever so slightly) some of the atoms.  

Have fun!
`}function jt(e){return e.button("Clear Drawing")}function Pt(e,t,n,a,i){let r=[];t.value=[];const o=n.select(a.svg(i.width/2,i.height/2)),l=i.height/i.width;o.attr("viewBox",[-10.5,-10.5,21,21]);o.append("rect").attr("x",-10.5/l).attr("y",-10.5).attr("width",21/l).attr("height",21).on("mousemove",(function(e){const t=o.selectAll(".tracker").data([n.pointer(e)]);if(t.enter().append("circle").attr("class","tracker").attr("r",.25).attr("stroke-width",.05).merge(t).attr("transform",(e=>`translate(${e})`)),r.length){const t=r.slice();t.push(n.pointer(e)),t.push(r[0]);const a=o.selectAll(".polyline").data([t]);a.enter().append("polygon").attr("class","polyline").attr("stroke-width",.1).merge(a).attr("points",(e=>e.join(" ")))}})).on("click",(function(e){r.push(n.pointer(e)),t.value=[...r,n.pointer(e)];const a=o.selectAll(".vertex").data(r);a.enter().append("circle").attr("class","vertex").attr("r",.25).attr("stroke-width",.05).merge(a).attr("transform",(e=>`translate(${e})`));const i=o.selectAll(".polygon").data([r]);i.enter().append("polygon").attr("class","polygon").merge(i).attr("stroke-width",.1).attr("points",(e=>e.join(" ")))}));return o.node()}function $t(e){return e.button("(re)Start Simulation")}function At(e,t,n,a,i,r,o,l,s,c,u){const d=e.select(t.svg(n.width,n.height)),f=a.map((e=>Object.create(e))).filter((e=>i.pointInPolygon([e.x,e.y],r)));d.attr("viewBox",[-10.5,-10.5,21,21]);const h=e.forceSimulation(f).force("lennard-jones-BH",e.forceLennardJonesPotential().theta(.125).distanceMax(1.5)).alphaDecay(0).velocityDecay(0).dt(.05).tick();h.counter=0;const[m,p]=l(d,f,null,!1,!1,s);return m.call(c(h)),h.on("tick",(()=>{h.counter++>500&&h.stop(),m.attr("cx",(e=>e.x)).attr("cy",(e=>e.y)).attr("fill",(e=>s(e.energy)))})),u.then((()=>h.stop())),d.node()}function It(e){return e`---`}function Tt(e){return e`---`}function zt(e){return e`
---
## Utility Functions`}function Jt(e){return e`### Imports`}function Bt(e){return e("d3@6","d3-force-md@2.2.2")}function Ot(e){return e`[\`d3-force-md\` Documentation](https://observablehq.com/@gvarnavi/d3-force-md-documentation?collection=@gvarnavi/d3-force-md) `}function Wt(e){return e("geometric@2")}function Gt(e){return e`### Plots`}function Nt(e){return e.range(.75,1.5,.00125).map((e=>({rho:e,energy:Math.pow(e,-12)-2*Math.pow(e,-6),force:12*Math.pow(e,-13)-12*Math.pow(e,-7),harmonic:36*Math.pow(e-1,2)-1})))}function Ct(e,t,n){return e.range(.75,1.5,.00125).map((e=>({rho:e,lj_energy:Math.pow(e,-12)-2*Math.pow(e,-6),generalized_energy:(t*Math.pow(e,-n)-n*Math.pow(e,-t))/(n-t)})))}function Et(e,t){return e.range(.75,1.5,.00125).map((e=>({rho:e,lj_energy:Math.pow(e,-12)-2*Math.pow(e,-6),morse_energy:t(e)})))}function Ft(e){return[...Array(201)].map(((t,n)=>({x:n/200,y:Math.sin(e*(2*Math.PI*n)/200)})))}function Ht(e,t,n){return e.range(-t/2-5,t+5).map((e=>({wavevector:2*Math.PI*e/t,frequency:2*Math.PI/n(t,e)})))}function Rt(e){return e.selectPoint().on("mouseover").fields("wavevector").nearest("true")}function Ut(e,t,n){return e.observe((e=>{e([]);const a=t.name(),i=(t,n)=>e(n?.vlPoint?.or??[]);return n.addSignalListener(a,i),()=>n.removeSignalListener(a,i)[0]}))}function Vt(e){return e`### 1D Lattice`}function Qt(){return 50}function Xt(){return.0125}function Yt(e,t,n){return[...Array(e+1)].map(((a,i)=>({x:i+t*Math.sin(n*(2*Math.PI*i)/e),y:0,fy:0}))).map((t=>0==t.x||t.x==e?{x:t.x,fx:t.x,y:t.y,fy:t.y}:t))}function Kt(e){return[...Array(e)].map(((e,t)=>({source:t,target:t+1})))}function Zt(){return function(e,t,n){return[[...Array(e+1)].map(((a,i)=>({x:i+n*Math.sin(t*(2*Math.PI*i)/e),y:0,fy:0}))).map((t=>0==t.x||t.x==e?{x:t.x,fx:t.x,y:t.y,fy:t.y}:t)),[...Array(e)].map(((e,t)=>({source:t,target:t+1})))]}}function en(e,t){return 0==e.length?0:"wavevector"in e[0]?Math.round(e[0].wavevector*t/(2*Math.PI)):0}function tn(e){return e.scaleSequential(e.interpolateTurbo).domain([-3.075,-3.025])}function nn(e){return e`### Square Lattice`}function an(e){return e.scaleSequential(e.interpolateTurbo).domain([-7,-2])}function rn(){return[...Array(289)].map(((e,t)=>({x:.975*(t%17-8),y:.975*(Math.floor(t/17)-8)})))}function on(){return(e,t)=>{const n=e.map((e=>Object.create(e)));let a,i;return a=n.filter((e=>Math.tan(t%Math.PI)*(e.x+1e-6)<e.y)),i=n.filter((e=>!a.includes(e))),[a,i]}}function ln(){return null}function sn(e,t,n){return e.range(0,90,7.5).map((e=>({theta:e,energy:t(n,e)})))}function cn(e,t){return e.range(0,360,7.5).map(((e,n)=>({x:t[n%t.length].energy*Math.cos(e*Math.PI/180),y:t[n%t.length].energy*Math.sin(e*Math.PI/180)})))}function un(e){return e`### Hexagonal Lattice`}function dn(){return(e,t)=>e.reduce(((e,n,a)=>e+Math.pow(n-t[a],2)),0)}function fn(){return[[1,0],[.5,Math.sqrt(3)/2]]}function hn(e,t,n){return[...Array(625)].map(((e,t)=>({x:t%25-12,y:Math.floor(t/25)-12}))).map((t=>({x:t.x*e[0][0]+t.y*e[1][0],y:t.x*e[0][1]+t.y*e[1][1]}))).filter((e=>t([e.x,e.y],[0,0])<100)).map((e=>({...e,vx:n*Math.sqrt(t([e.x,e.y],[0,0]))*Math.cos(Math.atan2(e.y,e.x)+Math.PI/2),vy:n*Math.sqrt(t([e.x,e.y],[0,0]))*Math.sin(Math.atan2(e.y,e.x)+Math.PI/2)})))}function mn(){return(e,t=.0175)=>Math.abs(e)<t?e:Math.sign(e)*t}function pn(e,t){return(n,a=.0175)=>t.drag().on("start",(function(e){e.active||(n.restart(),n.counter=100),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y})).on("drag",(function(t){t.subject.fx+=e(t.x-t.subject.fx,a),t.subject.fy+=e(t.y-t.subject.fy,a)})).on("end",(function(e){e.subject.fx=null,e.subject.fy=null}))}function gn(e){return e`### Beam`}function bn(e){return[...Array(3721)].map(((e,t)=>({x:t%61-30,y:Math.floor(t/61)-30}))).map((t=>({x:t.x*e[0][0]+t.y*e[1][0],y:t.x*e[0][1]+t.y*e[1][1]})))}function vn(e){return e.filter((e=>e.y>-.5&&e.y<12.5&&e.x<17.5&&e.x>-17.5)).map((e=>e.x<-15||e.x>15?{x:e.x,y:e.y,fx:e.x,fy:e.y}:e))}function _n(e){return e.filter((e=>15+6*e.x>=Math.sqrt(3)*(25+2*e.y)&&25+2*e.y>=0&&6*e.x+Math.sqrt(3)*(25+2*e.y)<=15)).map((e=>e.y<-5?{x:e.x,y:e.y+7.5,vx:0,vy:.75}:e))}function yn(e,t,n){let a=[];const i=e.map((e=>Object.create(e))),r=t.map((e=>Object.create(e))),o=n.forceSimulation([...i,...r]).force("lennard-jones-BH",n.forceLennardJonesPotential().theta(.125).distanceMax(1.75)).force("zero",(()=>{r.forEach((e=>{e.force_x=0,e.force_y=0}))})).alphaDecay(0).velocityDecay(0).dt(.025);for(let l=0;l<175;l++){o.tick();const e=new Map([...i,...r].map((e=>[e,{x:e.x,y:e.y,energy:e.energy}])));a.push(Array.from(e.values())),o.stop()}return a}function wn(e){return e`### Make Your Own`}function xn(e){return[...Array(1681)].map(((e,t)=>({x:t%41-20,y:Math.floor(t/41)-20}))).map((t=>({x:t.x*e[0][0]+t.y*e[1][0],y:t.x*e[0][1]+t.y*e[1][1]}))).filter((e=>e.x>-10&&e.x<10&&e.y>-10&&e.y<10))}function kn(){return[]}function Dn(e){return e`### General Utilities`}function Sn(){return(e,t,n,a,i,r)=>{null==r&&(r=e=>null);let o=null;n&&(o=e.selectAll(".edge").data(n).enter().append("line").classed("edge",!0).attr("x1",(e=>t[e.source].x)).attr("y1",(e=>t[e.source].y)).attr("x2",(e=>t[e.target].x)).attr("y2",(e=>t[e.target].y)).style("stroke",i?"#bbb":"none"));return[e.selectAll(".node").data(t).enter().append("circle").classed("node",!0).attr("cx",(e=>e.x)).attr("cy",(e=>e.y)).attr("fill",(e=>r(e.energy))).attr("r",(e=>a?e.r:.5)),o]}}function Mn(e){return{width:e,height:500,margin:{top:10,right:10,bottom:10,left:10,center:150}}}function Ln(e){return t=>e(Array.from({length:t},((e,t)=>t)),{format:e=>"frame of simulation: "+(e+1),autoplay:!1,loop:!1})}function qn(e){return e`<style>
rect {
  fill: #f5f5f5;
}
.polyline {
  fill: none;
  pointer-events: none;
  stroke: #000;
  stroke-dasharray: 2.5, 2.5;
}
.polygon {
  fill: none;
  pointer-events: none;
  stroke: #000;
}
.tracker {
  fill: none;
  stroke: #000;
}
</style>
`}function jn(e,t){const n=e.module();n.variable(t()).define(["md"],V),n.variable(t()).define(["md"],Q),n.variable(t()).define(["md"],X),n.variable(t("lennardJonesPotentialDoc")).define("lennardJonesPotentialDoc",["md"],Y),n.variable(t("lj_plot")).define("lj_plot",["Plot","lj_data"],K),n.variable(t()).define(["md"],Z),n.variable(t()).define(["md","tex"],ee),n.variable(t()).define(["tex"],te),n.variable(t()).define(["md","tex"],ne),n.variable(t()).define(["tex"],ae),n.variable(t()).define(["md"],ie),n.variable(t()).define(["tex"],re),n.variable(t("lj_harmonic_plot")).define("lj_harmonic_plot",["Plot","lj_data"],oe),n.variable(t("latticeVibrationsDoc")).define("latticeVibrationsDoc",["md"],le),n.variable(t()).define(["md","num_of_atoms","oscillation_magnitude_static"],se),n.variable(t("viewof restart_button_1d")).define("viewof restart_button_1d",["Inputs"],ce),n.variable(t("restart_button_1d")).define("restart_button_1d",["Generators","viewof restart_button_1d"],((e,t)=>e.input(t))),n.variable(t("harmonic_animation")).define("harmonic_animation",["d3","DOM","chart_param","one_dimensional_lattice","one_dimensional_lattice_links","restart_button_1d","num_of_atoms","draw_nodes","oscillation_direction","oscillation_magnitude_static","invalidation"],ue),n.variable(t()).define(["md"],de),n.variable(t("sine_wave_plot")).define("sine_wave_plot",["Plot","chart_param","sine_wave"],fe),n.variable(t()).define(["md"],he),n.variable(t("viewof sub_harmonic")).define("viewof sub_harmonic",["Inputs"],me),n.variable(t("sub_harmonic")).define("sub_harmonic",["Generators","viewof sub_harmonic"],((e,t)=>e.input(t))),n.variable(t()).define(["md"],pe),n.variable(t("viewof oscillation_direction")).define("viewof oscillation_direction",["Inputs"],ge),n.variable(t("oscillation_direction")).define("oscillation_direction",["Generators","viewof oscillation_direction"],((e,t)=>e.input(t))),n.variable(t()).define(["md"],be),n.variable(t("compute_single_period")).define("compute_single_period",["oscillation_magnitude_static","make_one_dimensional_lattice","d3"],ve),n.variable(t()).define(["md","compute_single_period","num_of_atoms","sub_harmonic"],_e),n.variable(t()).define(["md","num_of_atoms","tex"],ye),n.variable(t("viewof dispersion_plot")).define("viewof dispersion_plot",["mouseover_selection","vl","dispersion_data","chart_param"],we),n.variable(t("dispersion_plot")).define("dispersion_plot",["Generators","viewof dispersion_plot"],((e,t)=>e.input(t))),n.variable(t()).define(["md"],xe),n.variable(t("dispersion_animation")).define("dispersion_animation",["d3","DOM","chart_param","make_one_dimensional_lattice","num_of_atoms","dispersion_subharmonic","oscillation_magnitude_static","draw_nodes","oscillation_direction","oscillation_magnitude","invalidation"],ke),n.variable(t()).define(["md","dispersion_subharmonic"],De),n.variable(t()).define(["md","tex"],Se),n.variable(t()).define(["md"],Me),n.variable(t("viewof restart_button_1d_lj")).define("viewof restart_button_1d_lj",["Inputs"],Le),n.variable(t("restart_button_1d_lj")).define("restart_button_1d_lj",["Generators","viewof restart_button_1d_lj"],((e,t)=>e.input(t))),n.variable(t("lennard_jones_animation")).define("lennard_jones_animation",["d3","DOM","chart_param","restart_button_1d_lj","make_one_dimensional_lattice","num_of_atoms","sub_harmonic","oscillation_magnitude","draw_nodes","colorScale1D","oscillation_direction","invalidation"],qe),n.variable(t("viewof oscillation_magnitude")).define("viewof oscillation_magnitude",["Inputs"],je),n.variable(t("oscillation_magnitude")).define("oscillation_magnitude",["Generators","viewof oscillation_magnitude"],((e,t)=>e.input(t))),n.variable(t()).define(["md"],Pe),n.variable(t()).define(["legend","colorScale1D","chart_param"],$e),n.variable(t()).define(["md"],Ae),n.variable(t("surfaceEnergyDoc")).define("surfaceEnergyDoc",["md"],Ie),n.variable(t("square_surface_energy")).define("square_surface_energy",["d3","DOM","chart_param","square_lattice","draw_nodes","colorScale","mutable static_bulk_energy"],Te),n.variable(t()).define(["legend","colorScale","chart_param"],ze),n.variable(t()).define(["md"],Je),n.variable(t()).define(["md"],Be),n.variable(t("surface_energy_slide_graphic")).define("surface_energy_slide_graphic",["d3","DOM","chart_param","theta_in_deg","slice_particle","square_lattice","draw_nodes","colorScale"],Oe),n.variable(t("viewof theta_in_deg")).define("viewof theta_in_deg",["Inputs"],We),n.variable(t("theta_in_deg")).define("theta_in_deg",["Generators","viewof theta_in_deg"],((e,t)=>e.input(t))),n.variable(t()).define(["md"],Ge),n.variable(t()).define(["md"],Ne),n.variable(t()).define(["tex"],Ce),n.variable(t()).define(["md","tex"],Ee),n.variable(t("compute_average_energy")).define("compute_average_energy",["slice_particle","square_lattice","d3","static_bulk_energy"],Fe),n.variable(t()).define(["md","theta_in_deg","compute_average_energy","square_lattice"],He),n.variable(t()).define(["md"],Re),n.variable(t("surface_energy_plot")).define("surface_energy_plot",["Plot","surface_energy_data"],Ue),n.variable(t()).define(["md"],Ve),n.variable(t()).define(["md"],Qe),n.variable(t("viewof restart_button_square")).define("viewof restart_button_square",["Inputs"],Xe),n.variable(t("restart_button_square")).define("restart_button_square",["Generators","viewof restart_button_square"],((e,t)=>e.input(t))),n.variable(t("square_instability_animation")).define("square_instability_animation",["d3","DOM","chart_param","square_lattice","restart_button_square","draw_nodes","colorScale","invalidation"],Ye),n.variable(t()).define(["legend","colorScale","chart_param"],Ke),n.variable(t()).define(["md"],Ze),n.variable(t("compressionWavesDoc")).define("compressionWavesDoc",["md"],et),n.variable(t()).define(["md"],tt),n.variable(t("viewof restart_button_hexagonal")).define("viewof restart_button_hexagonal",["Inputs"],nt),n.variable(t("restart_button_hexagonal")).define("restart_button_hexagonal",["Generators","viewof restart_button_hexagonal"],((e,t)=>e.input(t))),n.variable(t("compression_waves_animation")).define("compression_waves_animation",["d3","DOM","chart_param","hexagonal_lattice","restart_button_hexagonal","draw_nodes","colorScale","drag","invalidation"],at),n.variable(t()).define(["legend","colorScale","chart_param"],it),n.variable(t("viewof nanoparticle_initial_velocity_magnitude")).define("viewof nanoparticle_initial_velocity_magnitude",["Inputs"],rt),n.variable(t("nanoparticle_initial_velocity_magnitude")).define("nanoparticle_initial_velocity_magnitude",["Generators","viewof nanoparticle_initial_velocity_magnitude"],((e,t)=>e.input(t))),n.variable(t()).define(["md"],ot),n.variable(t()).define(["md"],lt),n.variable(t("dislocationsDoc")).define("dislocationsDoc",["md"],st),n.variable(t("viewof animation_frame")).define("viewof animation_frame",["sim_scrubber"],ct),n.variable(t("animation_frame")).define("animation_frame",["Generators","viewof animation_frame"],((e,t)=>e.input(t))),n.variable(t("dislocations_animation")).define("dislocations_animation",["d3","DOM","chart_param","precomputed_animation","animation_frame","draw_nodes","colorScale"],ut),n.variable(t()).define(["legend","colorScale","chart_param"],dt),n.variable(t()).define(["md"],ft),n.variable(t("beyondLJDoc")).define("beyondLJDoc",["md"],ht),n.variable(t()).define(["md"],mt),n.variable(t()).define(["tex"],pt),n.variable(t("lj_generalized_plot")).define("lj_generalized_plot",["Plot","generalized_lj_data"],gt),n.variable(t("viewof repulsivePower")).define("viewof repulsivePower",["Inputs"],bt),n.variable(t("repulsivePower")).define("repulsivePower",["Generators","viewof repulsivePower"],((e,t)=>e.input(t))),n.variable(t("viewof attractivePower")).define("viewof attractivePower",["Inputs"],vt),n.variable(t("attractivePower")).define("attractivePower",["Generators","viewof attractivePower"],((e,t)=>e.input(t))),n.variable(t("viewof restart_button_hexagonal_generalized")).define("viewof restart_button_hexagonal_generalized",["Inputs"],_t),n.variable(t("restart_button_hexagonal_generalized")).define("restart_button_hexagonal_generalized",["Generators","viewof restart_button_hexagonal_generalized"],((e,t)=>e.input(t))),n.variable(t("generalized_lj_animation")).define("generalized_lj_animation",["d3","DOM","chart_param","hexagonal_lattice","restart_button_hexagonal_generalized","attractivePower","repulsivePower","draw_nodes","colorScale","drag","invalidation"],yt),n.variable(t()).define(["md"],wt),n.variable(t()).define(["tex"],xt),n.variable(t("morse_plot")).define("morse_plot",["Plot","morse_data"],kt),n.variable(t("morsePotential")).define("morsePotential",Dt),n.variable(t("morseGradient")).define("morseGradient",St),n.variable(t("viewof restart_button_hexagonal_morse")).define("viewof restart_button_hexagonal_morse",["Inputs"],Mt),n.variable(t("restart_button_hexagonal_morse")).define("restart_button_hexagonal_morse",["Generators","viewof restart_button_hexagonal_morse"],((e,t)=>e.input(t))),n.variable(t("morse_animation")).define("morse_animation",["d3","DOM","chart_param","hexagonal_lattice","restart_button_hexagonal_morse","morsePotential","morseGradient","draw_nodes","colorScale","drag","invalidation"],Lt),n.variable(t("playgroundDoc")).define("playgroundDoc",["md"],qt),n.variable(t("viewof restart")).define("viewof restart",["Inputs"],jt),n.variable(t("restart")).define("restart",["Generators","viewof restart"],((e,t)=>e.input(t))),n.variable(t("playground_canvas")).define("playground_canvas",["restart","mutable polygon_mutable","d3","DOM","chart_param"],Pt),n.variable(t("viewof restart_button_polygon")).define("viewof restart_button_polygon",["Inputs"],$t),n.variable(t("restart_button_polygon")).define("restart_button_polygon",["Generators","viewof restart_button_polygon"],((e,t)=>e.input(t))),n.variable(t("playground_animation")).define("playground_animation",["d3","DOM","chart_param","large_hexagonal_lattice","geometric","polygon_mutable","restart_button_polygon","draw_nodes","colorScale","drag","invalidation"],At),n.variable(t()).define(["md"],It),n.variable(t()).define(["md"],Tt),n.variable(t()).define(["md"],zt),n.variable(t()).define(["md"],Jt),n.variable(t("d3")).define("d3",["require"],Bt),n.variable(t()).define(["md"],Ot);const a=e.module(k);n.import("legend",a),n.variable(t("geometric")).define("geometric",["require"],Wt);const i=e.module(U);return n.import("Scrubber",i),n.variable(t()).define(["md"],Gt),n.variable(t("lj_data")).define("lj_data",["d3"],Nt),n.variable(t("generalized_lj_data")).define("generalized_lj_data",["d3","repulsivePower","attractivePower"],Ct),n.variable(t("morse_data")).define("morse_data",["d3","morsePotential"],Et),n.variable(t("sine_wave")).define("sine_wave",["sub_harmonic"],Ft),n.variable(t("dispersion_data")).define("dispersion_data",["d3","num_of_atoms","compute_single_period"],Ht),n.variable(t("mouseover_selection")).define("mouseover_selection",["vl"],Rt),n.variable(t("dispersion_mouseover")).define("dispersion_mouseover",["Generators","mouseover_selection","dispersion_plot"],Ut),n.variable(t()).define(["md"],Vt),n.variable(t("num_of_atoms")).define("num_of_atoms",Qt),n.variable(t("oscillation_magnitude_static")).define("oscillation_magnitude_static",Xt),n.variable(t("one_dimensional_lattice")).define("one_dimensional_lattice",["num_of_atoms","oscillation_magnitude_static","sub_harmonic"],Yt),n.variable(t("one_dimensional_lattice_links")).define("one_dimensional_lattice_links",["num_of_atoms"],Kt),n.variable(t("make_one_dimensional_lattice")).define("make_one_dimensional_lattice",Zt),n.variable(t("dispersion_subharmonic")).define("dispersion_subharmonic",["dispersion_mouseover","num_of_atoms"],en),n.variable(t("colorScale1D")).define("colorScale1D",["d3"],tn),n.variable(t()).define(["md"],nn),n.variable(t("colorScale")).define("colorScale",["d3"],an),n.variable(t("square_lattice")).define("square_lattice",rn),n.variable(t("slice_particle")).define("slice_particle",on),n.define("initial static_bulk_energy",ln),n.variable(t("mutable static_bulk_energy")).define("mutable static_bulk_energy",["Mutable","initial static_bulk_energy"],((e,t)=>new e(t))),n.variable(t("static_bulk_energy")).define("static_bulk_energy",["mutable static_bulk_energy"],(e=>e.generator)),n.variable(t("surface_energy_data_quarter")).define("surface_energy_data_quarter",["d3","compute_average_energy","square_lattice"],sn),n.variable(t("surface_energy_data")).define("surface_energy_data",["d3","surface_energy_data_quarter"],cn),n.variable(t()).define(["md"],un),n.variable(t("calc_squared_distance")).define("calc_squared_distance",dn),n.variable(t("hexagonal_lattice_vectors")).define("hexagonal_lattice_vectors",fn),n.variable(t("hexagonal_lattice")).define("hexagonal_lattice",["hexagonal_lattice_vectors","calc_squared_distance","nanoparticle_initial_velocity_magnitude"],hn),n.variable(t("inside_range")).define("inside_range",mn),n.variable(t("drag")).define("drag",["inside_range","d3"],pn),n.variable(t()).define(["md"],gn),n.variable(t("large_hex_particles")).define("large_hex_particles",["hexagonal_lattice_vectors"],bn),n.variable(t("beam_particles")).define("beam_particles",["large_hex_particles"],vn),n.variable(t("indenter_particles")).define("indenter_particles",["large_hex_particles"],_n),n.variable(t("precomputed_animation")).define("precomputed_animation",["beam_particles","indenter_particles","d3"],yn),n.variable(t()).define(["md"],wn),n.variable(t("large_hexagonal_lattice")).define("large_hexagonal_lattice",["hexagonal_lattice_vectors"],xn),n.define("initial polygon_mutable",kn),n.variable(t("mutable polygon_mutable")).define("mutable polygon_mutable",["Mutable","initial polygon_mutable"],((e,t)=>new e(t))),n.variable(t("polygon_mutable")).define("polygon_mutable",["mutable polygon_mutable"],(e=>e.generator)),n.variable(t()).define(["md"],Dn),n.variable(t("draw_nodes")).define("draw_nodes",Sn),n.variable(t("chart_param")).define("chart_param",["width"],Mn),n.variable(t("sim_scrubber")).define("sim_scrubber",["Scrubber"],Ln),n.variable(t()).define(["html"],qn),n}function Pn(e,t,n){return n.html`<div style ="display: flex;">
  <div>${e.node()}</div>
  <div>${t.node()}</div>
</div>`}function $n(e,t,n){return n.html`<div style="display: flex;">
  <div style="margin-left:40px; width:210px;">${e}</div>
  <div style="margin-left:40px; width:210px;">${t}</div>
</div>`}function An(e){return e`<hr class="hideable-md" >`}function In(e){return e("d3@6","d3-force-md@2.2.2")}function Tn(){return[[-8,-8],[-8,8],[8,8],[8,-8]]}function zn(e){return e`<style>
rect {
  fill: #f5f5f5;
}
.polyline {
  fill: none;
  pointer-events: none;
  stroke: #000;
  stroke-dasharray: 2.5, 2.5;
}
.polygon {
  fill: none;
  pointer-events: none;
  stroke: #000;
}
.tracker {
  fill: none;
  stroke: #000;
}
</style>
`}function Jn(e){return e.button("clear drawing canvas")}function Bn(e){return e.button("restart simulation")}function On(e,t,n,a,i,r,o){e!=t&&(n.value=[],a.value=t);let l=i.slice();const s=r.select(o.svg(250,200));s.attr("viewBox",[-10.5,-10.5,21,21]);const c=s.append("rect").attr("x",-10.5).attr("y",-10.5).attr("width",21).attr("height",21);if(l.length){const e=s.selectAll(".vertex").data(l);e.enter().append("circle").attr("class","vertex").attr("r",.125).attr("stroke-width",.05).merge(e).attr("transform",(e=>`translate(${e})`));const t=s.selectAll(".polygon").data([l]);t.enter().append("polygon").attr("class","polygon").merge(t).attr("stroke-width",.1).attr("points",(e=>e.join(" ")))}return c.on("mousemove",(function(e){const t=s.selectAll(".tracker").data([r.pointer(e)]);if(t.enter().append("circle").attr("class","tracker").attr("r",.25).attr("stroke-width",.05).merge(t).attr("transform",(e=>`translate(${e})`)),l.length){const t=l.slice();t.push(r.pointer(e)),t.push(l[0]);const n=s.selectAll(".polyline").data([t]);n.enter().append("polygon").attr("class","polyline").attr("stroke-width",.1).merge(n).attr("points",(e=>e.join(" ")))}})).on("mouseout",(function(e){s.selectAll(".polyline").remove(),s.selectAll(".tracker").remove()})).on("click",(function(e){l.push(r.pointer(e)),n.value=[...l,r.pointer(e)]})),s}function Wn(e,t,n,a,i,r,o,l,s,c){const u=e.select(t.svg(250,200)),d=n.map((e=>Object.create(e))).filter((e=>a.pointInPolygon([e.x,e.y],i)));u.attr("viewBox",[-10.5,-10.5,21,21]);const f=e.forceSimulation(d).force("lennard-jones-BH",e.forceLennardJonesPotential().theta(.125).distanceMax(1.5)).alphaDecay(0).velocityDecay(0).dt(.05).tick();f.counter=0;const[h,m]=o(u,d,null,!1,!1,l);return h.call(s(f)),f.on("tick",(()=>{f.counter++>500&&f.stop(),h.attr("cx",(e=>e.x)).attr("cy",(e=>e.y)).attr("fill",(e=>l(e.energy)))})),c.then((()=>f.stop())),u}function Gn(){return 0}function Nn(e,t){const n=e.module();n.variable(t()).define(["playground_canvas","playground_animation","htl"],Pn),n.variable(t()).define(["viewof restart","viewof restart_button_polygon","htl"],$n),n.variable(t()).define(["md"],An),n.variable(t("d3")).define("d3",["require"],In),n.define("initial polygon_mutable",Tn),n.variable(t("mutable polygon_mutable")).define("mutable polygon_mutable",["Mutable","initial polygon_mutable"],((e,t)=>new e(t))),n.variable(t("polygon_mutable")).define("polygon_mutable",["mutable polygon_mutable"],(e=>e.generator));const a=e.module(jn);return n.import("drag",a),n.import("draw_nodes",a),n.import("colorScale",a),n.import("large_hexagonal_lattice",a),n.import("geometric",a),n.variable(t()).define(["html"],zn),n.variable(t("viewof restart")).define("viewof restart",["Inputs"],Jn),n.variable(t("restart")).define("restart",["Generators","viewof restart"],((e,t)=>e.input(t))),n.variable(t("viewof restart_button_polygon")).define("viewof restart_button_polygon",["Inputs"],Bn),n.variable(t("restart_button_polygon")).define("restart_button_polygon",["Generators","viewof restart_button_polygon"],((e,t)=>e.input(t))),n.variable(t("playground_canvas")).define("playground_canvas",["global_restart","restart","mutable polygon_mutable","mutable global_restart","polygon_mutable","d3","DOM"],On),n.variable(t("playground_animation")).define("playground_animation",["d3","DOM","large_hexagonal_lattice","geometric","polygon_mutable","restart_button_polygon","draw_nodes","colorScale","drag","invalidation"],Wn),n.define("initial global_restart",Gn),n.variable(t("mutable global_restart")).define("mutable global_restart",["Mutable","initial global_restart"],((e,t)=>new e(t))),n.variable(t("global_restart")).define("global_restart",["mutable global_restart"],(e=>e.generator)),n}n.r(t),n.d(t,{default:()=>Nn})}}]);